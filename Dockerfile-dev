FROM ubuntu:19.10

COPY docker/build-gstreamer/install-dependencies /

RUN ["/install-dependencies"]

ARG GSTREAMER_CHECKOUT=8fb1fe46200b7aac2716e6a2413fbb9c7042e901
ARG LIBNICE_CHECKOUT=a9c2846a89c4e74efbd7ef59fcfe7ff05efb2c5e
ARG GST_PLUGINS_BASE_CHECKOUT=d5ee11fb36af3aa5a18368648cb043448d66b845
ARG GST_PLUGINS_BAD_CHECKOUT=adc3d127414ca56e50b440a71dc9e95daf76a94e
ARG GST_PLUGINS_GOOD_CHECKOUT=ac43de33a2511b9b5bdb54ea9959e7eaea80e857
ARG GST_PLUGINS_UGLY_CHECKOUT=9273903286b0fe7a9d8a5279c44a5e149e55ff24
ARG GST_LIBAV_CHECKOUT=c8b88847919c9cb26205d91111fa11d4d4f44883

COPY docker/build-gstreamer/download /

RUN ["/download"]

COPY docker/build-gstreamer/compile /

ARG DEBUG=true

RUN ["/compile"]
