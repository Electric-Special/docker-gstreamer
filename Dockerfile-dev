FROM ubuntu:19.10

COPY docker/build-gstreamer/install-dependencies /

RUN ["/install-dependencies"]

ARG STREAMER_CHECKOUT=19b28788cfd15c1382cc7a6bf6621b246def012f
ARG GST_PLUGINS_BAD_CHECKOUT=9335ce6ecaa3c53825f81712ec857880b1bfee22
ARG GST_PLUGINS_BASE_CHECKOUT=0a515acfa807788d87763b929fd684abd9853025
ARG GST_PLUGINS_GOOD_CHECKOUT=e54054dea2f53774f9b29c2cef888e0b73c707b2
ARG GST_PLUGINS_UGLY_CHECKOUT=a47b6b5f3c215e05f93617085db03b5a4a9ac72f
ARG GST_LIBAV_CHECKOUT=b7d450b11834d0a510fdcb661ce105860338e2d6
ARG LIBNICE_CHECKOUT=d4ef6b692fe7a18013fbb698d8fc7d0f2995ef8c

COPY docker/build-gstreamer/download /

RUN ["/download"]

COPY docker/build-gstreamer/compile /

ARG DEBUG=true

RUN ["/compile"]
