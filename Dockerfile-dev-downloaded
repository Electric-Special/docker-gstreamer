FROM restreamio/gstreamer:latest-dev-dependencies

ARG GSTREAMER_REPOSITORY=https://gitlab.freedesktop.org/ystreet/gstreamer.git
ARG GSTREAMER_CHECKOUT=4bd122e6cd74c74a2e5add7ca0153a174ecb987e

ARG LIBWPE_VERSION=1.7.1
ARG WPEBACKEND_FDO_VERSION=1.7.1
ARG WPEWEBKIT_VERSION=2.29.2

ARG USRSCTP_REPOSITORY=https://github.com/sctplab/usrsctp.git
ARG USRSCTP_CHECKOUT=547d3b46c64876c0336b9eef297fda58dbe1adaf

ARG LIBNICE_REPOSITORY=https://gitlab.freedesktop.org/libnice/libnice.git
ARG LIBNICE_CHECKOUT=0bcbf1c2fc836a239265817b4b08365c64fb0644

ARG GST_PLUGINS_BASE_REPOSITORY=https://gitlab.freedesktop.org/nazar-pc/gst-plugins-base.git
ARG GST_PLUGINS_BASE_CHECKOUT=72198e4d1dd8283838d058343574b3426d31ea16

ARG GST_PLUGINS_BAD_REPOSITORY=https://gitlab.freedesktop.org/nazar-pc/gst-plugins-bad.git
ARG GST_PLUGINS_BAD_CHECKOUT=920d69d5a2538751093999db268a6d0742085bdf

ARG GST_PLUGINS_GOOD_REPOSITORY=https://gitlab.freedesktop.org/nazar-pc/gst-plugins-good.git
ARG GST_PLUGINS_GOOD_CHECKOUT=553406c1bd3a1254cddc017530ee1d58406cc65f

ARG GST_PLUGINS_UGLY_REPOSITORY=https://gitlab.freedesktop.org/gstreamer/gst-plugins-ugly.git
ARG GST_PLUGINS_UGLY_CHECKOUT=ea945eb9c6af89a1ab70ad254fd6f9523eb5861d

ARG GST_LIBAV_REPOSITORY=https://gitlab.freedesktop.org/gstreamer/gst-libav.git
ARG GST_LIBAV_CHECKOUT=edce08b526d9288ea75b0b3e0597030c8714d4cf

COPY docker/build-gstreamer/download /

RUN ["/download"]

COPY docker/build-gstreamer/compile /
