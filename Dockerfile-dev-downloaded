FROM restreamio/gstreamer:dev-dependencies

ARG GSTREAMER_REPOSITORY=https://gitlab.freedesktop.org/nazar-pc/gstreamer.git
ARG GSTREAMER_CHECKOUT=70932a5031982fdfa8ab10fbdf3d28a6f1eae8dd

# Upgrade once https://github.com/Igalia/WPEBackend-fdo/issues/145 is fixed
ARG LIBWPE_VERSION=1.9.1
ARG WPEBACKEND_FDO_VERSION=1.9.1
ARG WPEWEBKIT_VERSION=2.31.1

ARG LIBNICE_REPOSITORY=https://gitlab.freedesktop.org/libnice/libnice.git
ARG LIBNICE_CHECKOUT=a874865807cdd3b27f63e32c9d2675fe31878158

ARG GST_PLUGINS_BASE_REPOSITORY=https://gitlab.freedesktop.org/nazar-pc/gst-plugins-base.git
ARG GST_PLUGINS_BASE_CHECKOUT=3cd3b973f7db69d02890c570be20b7bad48969b4

ARG GST_PLUGINS_BAD_REPOSITORY=https://gitlab.freedesktop.org/nazar-pc/gst-plugins-bad.git
ARG GST_PLUGINS_BAD_CHECKOUT=f4a5fd30cc4f155cb4061229dec074fd5f82f3eb

ARG GST_PLUGINS_GOOD_REPOSITORY=https://gitlab.freedesktop.org/nazar-pc/gst-plugins-good.git
ARG GST_PLUGINS_GOOD_CHECKOUT=880db701edca869660c75fcdc4df656d91e5241b

ARG GST_PLUGINS_UGLY_REPOSITORY=https://gitlab.freedesktop.org/gstreamer/gst-plugins-ugly.git
ARG GST_PLUGINS_UGLY_CHECKOUT=828d1d0d182b59413237347e969dd05fadcc303f

ARG GST_LIBAV_REPOSITORY=https://gitlab.freedesktop.org/gstreamer/gst-libav.git
ARG GST_LIBAV_CHECKOUT=a98eafa5a7339dce56f028b0d45b97a5706f02bd

ARG GSTREAMER_VAAPI_REPOSITORY=https://gitlab.freedesktop.org/gstreamer/gstreamer-vaapi.git
ARG GSTREAMER_VAAPI_CHECKOUT=2080979d102a34dbb8710d36ea45374cadf38d8e

COPY docker/build-gstreamer/download /

RUN ["/download"]

COPY docker/build-gstreamer/compile /
